<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

	<bean id="propertyConfigurer"
		class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
		<property name="locations">
			<list>
				<value>exporter.properties</value>
			</list>
		</property>
	</bean>


	<bean id="configuration" class="com.db.exporter.config.Configuration">
		<property name="userName" value="${db.derby.username}" />
		<property name="password" value="${db.derby.password}" />
		<property name="driverName" value="${db.derby.driverClassName}"></property>
		<property name="queueMaxSize" value="${exporter.queue.size}"></property>
		<property name="dumpFilePath" value="${exporter.dump.filePath}"></property>
		<property name="derbyDbPath" value="${exporter.derbyDB.filePath}"></property>
	</bean>

	<bean
		class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
		<property name="targetClass" value="org.springframework.util.Log4jConfigurer" />
		<property name="targetMethod" value="initLogging" />
		<property name="arguments">
			<list>
				<value>src/main/resources/log4j.properties</value>
			</list>
		</property>
	</bean>

	<bean id="derbyDBReaderImpl" class="com.db.exporter.reader.impl.DerbyDBReaderImpl">
		<property name="dbConnectionManager" ref="dbConnectionManager"></property>
		<property name="queueManager" ref="queueManager"></property>
		<property name="configuration" ref="configuration"></property>
	</bean>

	<bean id="dbConnectionManager" class="com.db.exporter.utils.DBConnectionManager">
		<property name="dbConnection" ref="dbConnection"></property>
	</bean>

	<bean id="dbConnection" class="com.db.exporter.utils.DBConnection">
		<property name="configuration" ref="configuration"></property>
	</bean>

	<bean id="queueManager" class="com.db.exporter.writer.QueueManager">
		<property name="configuration" ref="configuration"></property>
	</bean>

	<bean id="readerThread" class="com.db.exporter.writer.ReaderThread"
		init-method="init" >
		<property name="queueManager" ref="queueManager"></property>
		<property name="configuration" ref="configuration"></property>
	</bean>
</beans>